--- 
- !ruby/object:Report 
  id: 1
  report_type: SQL
  name: Number of Users
  fields: []

  filters: !map:ActiveSupport::HashWithIndifferentAccess 
    hashes: 
  limit: 
  sql: SELECT COUNT(*) AS 'Number of Users' FROM users WHERE :conditions_with_and email NOT LIKE '%hesonline%' AND email NOT LIKE '%hesapps.com%';
  created_by_master: true
  friendly_url_key: 
- !ruby/object:Report 
  id: 2
  report_type: SQL
  name: Total Device Users
  fields: []

  filters: !map:ActiveSupport::HashWithIndifferentAccess 
    hashes: 
  limit: 
  sql: SELECT active_device AS 'Device', COUNT(*) AS 'Number of Users' FROM users WHERE :conditions_with_and active_device = 'FITBIT' OR :conditions_with_and active_device = 'JAWBONE' GROUP BY active_device;
  created_by_master: true
  friendly_url_key: Total Device Users
- !ruby/object:Report 
  id: 3
  report_type: Simple
  name: Number of Users by Gender
  fields: 
  - "5"
  - "31"
  filters: 
    :hashes: []

  limit: 
  sql: 
  created_by_master: false
  friendly_url_key: Number of Users by Gender
- !ruby/object:Report 
  id: 4
  report_type: SQL
  name: Total Participants by Day
  fields: []

  filters: 
    :hashes: []

  limit: 
  sql: |
    select dates.reported_on `Recorded On`, count(users.id) `Total Participants`
    from (select distinct(entries.recorded_on) reported_on from entries where recorded_on between :reported_on_min and :reported_on_max) dates
    left join users on (DATE(users.created_at) <= dates.reported_on)
    where :conditions
    group by dates.reported_on

  created_by_master: false
  friendly_url_key: Total Participants by Day
- !ruby/object:Report 
  id: 5
  report_type: Simple
  name: Days Logged by User
  fields: 
  - "1"
  - "18"
  filters: 
    :hashes: []

  limit: 
  sql: 
  created_by_master: false
  friendly_url_key: Days Logged by User
- !ruby/object:Report 
  id: 6
  report_type: Simple
  name: Achievements Earned by User
  fields: 
  - "1"
  - "16"
  filters: 
    :hashes: []

  limit: 
  sql: 
  created_by_master: false
  friendly_url_key: Achievements Earned by User
- !ruby/object:Report 
  id: 7
  report_type: SQL
  name: Total Fitbit Users
  fields: []

  filters: !map:ActiveSupport::HashWithIndifferentAccess 
    hashes: 
  limit: 
  sql: SELECT COUNT(*) AS 'Number of Fitbit Users' FROM users WHERE :conditions_with_and active_device = 'FITBIT';
  created_by_master: true
  friendly_url_key: Total Fitbit Users
- !ruby/object:Report 
  id: 8
  report_type: Simple
  name: New Report
  fields: 
  - "1"
  - 38|1
  - 40|1
  - 59|1
  - 25|1
  - "7"
  - "41"
  - "6"
  - 57|1
  filters: !map:ActiveSupport::HashWithIndifferentAccess 
    hashes: 
  limit: 
  sql: SELECT COUNT(*) AS 'Number of Jawbone Users' FROM users WHERE :conditions_with_and active_device = 'JAWBONE';
  created_by_master: true
  friendly_url_key: Total Jawbone Users
- !ruby/object:Report 
  id: 9
  stats: true
  report_type: SQL
  fields: []
  filters: !map:ActiveSupport::HashWithIndifferentAccess 
    hashes: 
  limit: 
  sql: SELECT `users`.`Date`, @total := @total + `users_registered` AS `Total Users` FROM (SELECT COUNT(users.id) AS `users_registered`, DATE(users.created_at) AS `date`, @total := 0 FROM users WHERE promotion_id = :promotion_id GROUP BY `date` ORDER BY `date` ASC) users FROM users WHERE promotion_id = :promotion_id GROUP BY `date` ORDER BY `date` ASC) users
  friendly_url_key: Participants Per Day
  name: Participants Per Day
- !ruby/object:Report
  id: 10
  stats: true
  report_type: SQL
  fields: []
  filters: !map:ActiveSupport::HashWithIndifferentAccess
    hashes:
  limit:
  sql: SELECT `recorded_on` AS `Date`, COUNT(user_id) AS `Active Users` FROM entries JOIN users ON users.id = entries.user_id AND users.promotion_id = :promotion_id WHERE (exercise_minutes > 0 OR exercise_steps > 0) GROUP BY recorded_on ORDER BY recorded_on ASC
  created_by_master: true
  friendly_url_key: Active Participants Per Day
  name: Active Participants Per Day
- !ruby/object:Report
  id: 11
  stats: true
  report_type: SQL
  fields: []
  filters: !map:ActiveSupport::HashWithIndifferentAccess
    hashes:
  limit:
  sql: SELECT CASE `demographics`.`gender` WHEN 'm' THEN 'Male' WHEN 'f' THEN 'Female' WHEN 'x' THEN 'Transgender' WHEN 'g' THEN 'Genderqueer' ELSE 'Unspecified' END AS `Participant Gender`, COUNT(users.id) AS `Total Users` FROM users LEFT JOIN demographics ON users.id = demographics.user_id WHERE users.promotion_id = :promotion_id GROUP BY `Participant Gender`
  created_by_master: true
  friendly_url_key: Gender
  name: Gender
